# 💬 快速聊天指南

## 概述

快速聊天提供即时的内联 AI 辅助,无需离开您的笔记。在文档中的任何位置按 `Cmd+/` 即可在需要的地方获得 AI 帮助。

---

## 🎯 什么是快速聊天?

### 内联 AI 助手

快速聊天就像在 Obsidian 中拥有 GitHub Copilot 的聊天功能:

```markdown
您的文本在这里|  ← 按 Cmd+/
              ↓
┌──────────────────────────────────┐
│ 💬 快速聊天                      │
│ ─────────────────────────────    │
│ 请求 AI 编辑或继续...            │
│                                  │
│ [发送]                     [✕]  │
└──────────────────────────────────┘
```

### vs 常规聊天

| 功能 | 快速聊天 | 常规聊天 |
|---------|------------|--------------|
| **位置** | 内联 | 侧边栏 |
| **上下文** | 当前笔记 | 手动选择 |
| **用法** | 快速编辑 | 长对话 |
| **结果** | 内联差异 | 聊天消息 |
| **最适合** | 写作流程 | 研究、规划 |

---

## 🚀 入门

### 启用快速聊天

1. **打开设置**
   - 设置 → LLMSider → 快速聊天

2. **启用功能**
   ```yaml
   启用快速聊天: ✓
   触发键: Cmd+/
   模型: GPT-4
   选中文本时显示: ✓ (可选)
   ```

   > 💡 **提示**: 启用"选中文本时显示"后，当你选中任何文本时，会自动显示一个浮动按钮，点击可直接针对选中内容进行快速聊天。

3. **配置快捷键**(可选)
   - 设置 → 快捷键
   - 搜索"快速聊天"
   - 设置您偏好的按键

### 首次使用

1. **打开任何笔记**
2. **将光标放在需要帮助的位置**
3. **按 `Cmd+/`**
4. **输入您的请求**
5. **按 `Enter` 或点击发送**

---

## 💡 使用示例

### 示例 1: 继续写作

**之前:**
```markdown
定期锻炼的好处包括
```

**快速聊天:**
```
用3个更多的好处继续这段话
```

**之后:**
```markdown
定期锻炼的好处包括改善心血管
健康、更好的心理健康和全天
能量水平的提高。
```

### 示例 2: 优化文本

**之前:**
```markdown
这个东西真的对生产力很好
```

**快速聊天:**
```
使其更专业和具体
```

**之后:**
```markdown
这个工具通过简化工作流程自动化
和减少手动任务开销,显著提高生产力。
```

### 示例 3: 添加代码

**之前:**
```markdown
以下是验证电子邮件的方法:
```

**快速聊天:**
```
添加一个 TypeScript 函数来验证电子邮件地址
```

**之后:**
```markdown
以下是验证电子邮件的方法:

```typescript
function validateEmail(email: string): boolean {
  const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return regex.test(email);
}
```
```

---

## 🎨 可视化差异预览

### 差异显示

当 AI 建议更改时,您会看到可视化差异:

```diff
- 将被删除的旧内容
+ 将被添加的新内容
  保持不变的内容
```

**操作:**
- **Tab** - 接受更改
- **Esc** - 拒绝更改
- **点击外部** - 关闭

---

## ⚙️ 配置

### 基本设置

| 设置 | 描述 | 默认值 |
|---------|-------------|---------|
| **已启用** | 开启/关闭快速聊天 | 关闭 |
| **触发键** | 键盘快捷键 | Cmd+/ |
| **模型** | 用于建议的 AI 模型 | GPT-3.5 |
| **最大令牌数** | 响应长度限制 | 500 |
| **温度** | 创造力级别 | 0.7 |

---

## 🔑 键盘快捷键

| 操作 | 快捷键 | 描述 |
|--------|----------|-------------|
| **打开快速聊天** | `Cmd+/` | 显示输入框 |
| **发送请求** | `Enter` | 提交查询 |
| **新行** | `Shift+Enter` | 在输入中添加行 |
| **接受差异** | `Tab` | 应用更改 |
| **拒绝差异** | `Esc` | 放弃更改 |
| **关闭** | `Esc` | 关闭快速聊天 |

---

## 💡 专业提示

### 🎯 有效的提示

**要具体:**
```
❌ "改进这个"
✅ "使其更正式并添加技术细节"
```

**使用动作动词:**
```
✅ "扩展"
✅ "总结"
✅ "以第一人称重写"
✅ "添加代码示例"
✅ "翻译成西班牙语"
```

**提供上下文:**
```
✅ "用相同风格的3个项目继续这个列表"
✅ "为技术读者总结上面的段落"
```

---

## 🔧 高级功能

### 上下文管理

**智能上下文检测:**
- 自动包含周围文本
- 检测代码块
- 理解列表结构

**手动上下文:**
```
快速聊天: "基于上面的标题,写一个介绍"
快速聊天: "扩展前面的要点"
```

---

## 🎯 用例

### 1. 内容增强

**提高清晰度:**
```markdown
原文: "这个东西做事情真的很好"
提示: "使其清晰具体"
结果: "自动化工作流工具高效处理数据
      并减少手动工作"
```

### 2. 代码辅助

**添加文档:**
```typescript
// 原文
function processData(data: any[]) {
  return data.map(x => x * 2);
}

// 快速聊天: "添加 JSDoc 和示例"
/**
 * 通过将每个值加倍来处理数据
 * @param data - 要处理的数字数组
 * @returns 值加倍的处理数组
 * @example
 * processData([1, 2, 3]) // 返回 [2, 4, 6]
 */
function processData(data: number[]): number[] {
  return data.map(x => x * 2);
}
```

---

## 🐛 故障排除

### 常见问题

**快速聊天未出现:**
1. ✅ 验证快速聊天已启用
2. ✅ 检查快捷键分配
3. ✅ 重启 Obsidian
4. ✅ 查看控制台错误

**无响应:**
1. ✅ 检查是否选择了模型
2. ✅ 验证 API 密钥有效
3. ✅ 检查网络连接
4. ✅ 尝试较短的提示

**差异未应用:**
1. ✅ 确保光标处于编辑模式
2. ✅ 尝试手动复制/粘贴
3. ✅ 检查文件权限
4. ✅ 重启 Obsidian

---

## 📊 性能技巧

### 速度优化

**快速模型选择:**
```yaml
# 最快
模型: GPT-3.5 Turbo
最大令牌数: 200
温度: 0.3

# 平衡
模型: GPT-4
最大令牌数: 500
温度: 0.5

# 质量(较慢)
模型: Claude 3 Opus
最大令牌数: 1000
温度: 0.7
```

---

## 📚 比较

### 快速聊天 vs 其他功能

| 功能 | 快速聊天 | 自动补全 | 聊天视图 |
|---------|------------|--------------|-----------|
| **触发** | 手动 | 自动 | 手动 |
| **位置** | 内联 | 内联 | 侧边栏 |
| **交互** | 基于请求 | 基于建议 | 对话 |
| **速度** | 中等 | 快速 | 变化 |
| **最适合** | 编辑 | 补全 | 复杂任务 |

### 何时使用什么

**使用快速聊天当:**
- ✅ 进行定向编辑
- ✅ 需要 AI 理解上下文
- ✅ 想要可视化差异预览
- ✅ 保持写作流程

**使用自动补全当:**
- ✅ 连续写作
- ✅ 想要即时建议
- ✅ 补全常见模式
- ✅ 需要最大速度

**使用聊天视图当:**
- ✅ 复杂的多步骤任务
- ✅ 需要对话历史
- ✅ 使用多个工具
- ✅ 研究和规划

---

## 📖 相关指南

- [自动补全](autocomplete.md) - 内联补全
- [选择弹出](selection-popup.md) - 右键操作
- [聊天界面](chat-interface.md) - 完整聊天功能
- [对话模式](conversation-modes.md) - 模式详情

---

**有疑问?** [GitHub Issues](https://github.com/gnuhpc/obsidian-llmsider/issues)
